---
title: AC/DC
comments: "false"
---
> 2023.09 ~ 2024.11
## 문제점
- Saltstack을 사용한 단일 IaC로 인프라를 관리하는데 리전이 점점 더 많아짐
- 하나의 코드 변경이 어떤 영향을 미치는지 모든 리전에서 일일히 테스트해야 했음
- Public 리전 뿐만 아니라 공공, 폐쇄망 등의 리전에서 테스트하기 위해 별도의 VDI에서 결과를 비교해야 함
- 즉, 코드 변경에 따른 검증 공수가 많이 들다보니 점점 정합성이 맞지 않게 됨
## 해결 방법
- Github Actions를 이용해 모든 Salt master 서버를 runner로 등록
- PR이 등록되면 변경사항을 파싱해 적절한 대상에 대해 Dry Run 수행
- 전체 리전의 결과를 정리해 웹 UI를 통해 쉽게 확인할 수 있도록 가공
- 더 나아가 Dry Run 뿐만 아니라 Deploy도 수행할 수 있도록 고도화
## 구조

![[Pasted image 20250427091339.png]]

![[Pasted image 20250427091443.png]]
1. 요구사항에 따라 IaC 개발
2. Git commit & PR
	- Github Actions에 등록된 각 환경별 Runner에서 IaC 검증
3. PR 승인 및 머지되면 자동으로 태그 생성
4. Github Actions로 Production 환경 배포
## 기술 스택
- Python, Shell Script
- Github Actions
## 도전
기존 방식에 익숙한 팀원들은 새로운 것을 받아들이는 것에 거부감을 느낄 때가 있습니다.
또한 클라우드 사업 성격상 장애와 가용률에 민감하기 때문에 배포 파이프라인을 도입하는 것에 대해 리더들은 보수적인 의견을 갖게 됩니다.
이 과정에서 자동화의 필요성과 효율성에 대해 지속적으로 소통하며 설득하고 결과로 증명하는 것이 개인적으로는 매우 큰 도전이었습니다.
올바른 사용 사례를 공유하고 객관적인 수치로 기존 방식보다 몇 퍼센트의 효율을 가지는지, 팀원들을 대상으로 설문조사와 기술 공유회를 개최하는 등의 노력을 기울였습니다.

결과적으로 팀원들 모두가 배포 파이프라인을 사용하게 된 이후, 자동화된 파이프라인이 수동 작업보다 안전하다는 것을 리더에게 설득할 수 있었습니다.
그리고 개발을 시작한 지 1년 6개월이 지난 후에 Production 레벨에 워크플로우를 적용하게 되었습니다.
## 결과

![[Pasted image 20250427093325.png]]
- IaC 검증에 필요한 팀 전체의 업무 시간을 주당 50시간 이상 감소
- 워크플로우 도입 후 6000회 이상의 Job 수행 (주당 60 ~ 100회 이상)
- CLI가 아닌 GUI 기반의 배포로 팀 내 표준 절차 변경
- 검증된 효율성과 안정성으로 Production 레벨의 배포에서 활용
## 기여도
- CI/CD 워크플로우 설계 (100%)
- Github Actions 워크플로우 개발 (100%)
- 배포 결과를 취합, 요약해 보여줄 수 있는 Python 스크립트 개발 (40%)
